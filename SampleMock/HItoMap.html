<!DOCTYPE html>
<html lang="ja">
    <head>
        <title>HitoMap</title>

        <!-- meta情報 -->
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- ライブラリインクルード -->
        <link rel="stylesheet" href="lib/jquery-ui.min.css">
        <script src="lib/jquery-1.11.3.min.js"></script>
        <script src="lib/jquery-ui.min.js"></script>
        <script src="https://maps.google.com/maps/api/js?v=3.exp&libraries=visualization&key=AIzaSyD1f5Z-Rqkh3z8HMuhd_sszHw2N1-RYBfk"></script>

        <!-- システム固有インクルード -->
        <link rel="stylesheet" href="style.main.css">    <!-- CSS@PC/タブレット用 -->
        <link rel="stylesheet" href="style.mobile.css">  <!-- CSS@スマホ用        -->
        <script src="./sample.js"></script>

        <!-- スクリプト実装部 -->
        <script>
            //====================================================
            // 関数定義
            //====================================================
            // 「カテゴリアイコン」ボタン押下
            function searchCategoryClicked( key ){
                var id = "searchCategory" + key;
                console.log("TODO:検索 = " + id);
            }

            // GoogleMap初期化
            function googleMapInitialize(){
                // 「./sample.js」の関数呼び出し
                initialize();
            }

            function onEntryBtnClicked(){
                var btnVal = $('#btnAmari').val();
                if( "valid" == btnVal ){
                    return;
                }
                var isHidden = $('#map_modal').attr('hidden');
                if( 'hidden' == isHidden  ){
                    $('#map_modal').attr('hidden',false);
                    $('#map_hidden').attr('hidden',false);
                }else{
                    $('#map_modal').attr('hidden',true);
                }
            }

            //====================================================
            // Redy処理
            //====================================================
            $(function(){

                function switchAmariMode(falg){
                    if( true == falg ){
                        $('#btnAmari').attr('src',"image/AmariNegative.png");
                        $('#btnAmari').val("invalid");
                        console.log("TODO：アマリ登録モードへ");
                    }else{
                        $('#btnAmari').attr('src',"image/AmariActive.png");
                        $('#btnAmari').val("valid");
                    }
                }
                function switchSagasuMode(falg){
                    if( true == falg ){
                        $('#btnSagasu').attr('src',"image/SagasuNegative.png");
                        $('#btnSagasu').val("invalid");
                        $('#SagasuSidebar').attr('hidden',false);
                        console.log("TODO：サガスモードへ");

                        $('#map_modal').attr('hidden',true);
                        $('#map_hidden').attr('hidden',true);
                    }else{
                        $('#btnSagasu').attr('src',"image/SagasuActive.png");
                        $('#btnSagasu').val("valid");
                        $('#SagasuSidebar').attr('hidden',true);
                    }
                }

                //--------------------------------------------
                // ハンドライベント実装
                //--------------------------------------------
                // 「サガス」ボタン押下
                $('#btnSagasu').click(function(){
                    var btnVal = $('#btnSagasu').val();
                    if( "valid" == btnVal ){
                        switchAmariMode(false);
                        switchSagasuMode(true);
                    }else{
                        switchAmariMode(true);
                        switchSagasuMode(false);
                    }
                })
                // 「アマリ」ボタン押下
                $('#btnAmari').click(function(){
                    var btnVal = $('#btnAmari').val();
                    if( "valid" == btnVal ){
                        switchAmariMode(true);
                        switchSagasuMode(false);
                    }else{
                        switchAmariMode(false);
                        switchSagasuMode(true);
                    }
                })
                // 「ユーザ」ボタン押下
                $('#btnUser').click(function(){
                    console.log("TODO：ログインしたい");
                })

                // アマリ「次へ」ボタン押下
                $('#amariNext').click(function(){
                    console.log("TODO：「次へ」したい");
                })
                // アマリ「キャンセル」ボタン押下
                $('#amariCancel').click(function(){
                    $('#map_modal').attr('hidden',true);
                    $('#map_hidden').attr('hidden',true);
                })
            })

            //====================================================
            // ロード時処理
            //====================================================
            $(window).on('load', function() {
                //実行処理
                googleMapInitialize();

                $('#map_modal').attr('hidden',true);                // モーダルレイヤをhiddenに設定
                $('#map_hidden').attr('hidden',true);            　 // サイドバーレイヤをhiddenに設定
                $('#SagasuSidebar').attr('hidden',true);            // サイドバーレイヤをhiddenに設定
            });
        </script>
    </head>
    <body>
        <!-- ================================================ -->
        <!--　コンテンツエリア（配置順に注意）  -->
        <!-- ================================================ -->
        <div class='contents'>
            <!-- ## レイヤ0 ##-->
            <div id="map_canvas" class='mapArea'></div>             <!-- 地図表示 -->
            <!-- ## レイヤ1 ##-->
            <div id="map_modal"  class='mapModal'></div>            <!-- 地図用モーダルフィルタ -->

            <!-- ## レイヤ2 ##-->
            <div id="map_hidden"  class='mapHide'>           <!-- アマリ投稿用隠しエリア -->
                <div id='AmariFormEdit'>
                    <div class='AmariForm'>
                        <div class='currentPointArea'></div>
                        <div class='entryArea'>
                            <table>
                                <tr><td>カテゴリ</td><td>
                                    <select id="category">
                                        <option value="Bento">お弁当</option>
                                        <option value="Tomoto">トマト</option>
                                    </select>
                                </td></tr>
                                <tr><td>ユーザ名</td><td><input type='text' value=''></td></tr>
                                <tr><td>内容    </td><td><input type='text' value=''></td></tr>
                            </table>
                        </div>
                        <div class='actionArea'>
                            <input class='okButton' id='amariNext'  type='button' value='次へ'>
                            <input class='cancelButton' id='amariCancel' type='button' value='キャンセル'>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ## レイヤ3 ##-->
            <div class='sidebar' id="SagasuSidebar">                <!-- サガス用サイドバー -->
                <table id='searchCategoryArea'>
                    <tr>
                        <td onclick="searchCategoryClicked('Cake')"     id='searchCategoryCake'    ><input type="image" class='searchCategory' src="image/ケーキのアイコン3.png"><br>ケーキ</td>
                        <td onclick="searchCategoryClicked('Bento')"    id='searchCategoryBento'   ><input type="image" class='searchCategory' src="image/日の丸弁当アイコン1.png"><br>お弁当</td>
                        <td onclick="searchCategoryClicked('Sushi')"    id='searchCategorySushi'   ><input type="image" class='searchCategory' src="image/寿司アイコン.png"><br>お寿司</td>
                    </tr>
                    <tr>
                        <td onclick="searchCategoryClicked('Onion')"    id='searchCategoryOnion'   ><input type="image" class='searchCategory' src="image/たまねぎイラスト1.png"><br>たまねぎ</td>
                        <td onclick="searchCategoryClicked('Tomato')"   id='searchCategoryTomato'  ><input type="image" class='searchCategory' src="image/トマトのアイコン2.png"><br>トマト</td>
                        <td onclick="searchCategoryClicked('Broccoli')" id='searchCategoryBroccoli'><input type="image" class='searchCategory' src="image/ブロッコリーアイコン1.png"><br>ブロッコリー</td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- ================================================ -->
        <!--　上部バーエリア  -->
        <!-- ================================================ -->
        <div class='topBar'>
            <div class='siteTitle'>HitoMap</div> 
            <div class='modeSwitch'>
                <input type="image" class='topModeChange' id='btnSagasu' src="image/SagasuActive.png" alt="サガス" value='valid' >
                <input type="image" class='topModeChange' id='btnAmari' src="image/AmariActive.png" alt="アマリ" value='valid' >
            </div>
            <div class='userStatus'>
                <input type="image" class='userIcon' id='btnUser' src="image/UserGeneral.png" alt="ゲスト">
            </div>
        </div>
    </body>
</html>